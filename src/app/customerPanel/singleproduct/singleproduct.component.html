<ion-content>
    <app-header></app-header>
    <main id="container">
        <section id="product" *ngIf="productData">
            <div id="product-images-and-details">
                <div id="product-images">
                    <div id="product-images-list">
                        <img [src]="item.image" (click)="selectedImage=item.image" class="product-images-list-item"
                            [alt]="item.imageName" *ngFor="let item of productData.productImages">
                    </div>
                    <img [src]="selectedImage" alt="Product Image Description" id="product-image-preview">
                </div>
                <div id="product-details">
                    <h2 id="product-name">{{productData.productName}}<br><span>{{productData.shortDescription}}</span>
                    </h2>
                    <div id="product-feature-buttons">
                        <button class="product-feature-button" *ngFor="let catText of category">{{catText}}</button>
                        <button class="product-feature-button" *ngFor="let subcatText of subcategory">{{subcatText}}</button>
                    </div>
                    <p id="product-price">Price: &#8377; <span *ngIf="productPrice==0">{{displayPrice}}</span> <span *ngIf="productPrice!=0">{{productPrice}}</span></p>
                    <div id="product-action-buttons">
                        <button id="product-buy-now" class=product-action-button (click)="buyNow()">Buy Now</button>
                        <button id="product-add-to-cart" class=product-action-button (click)="addToCart()">Add to Cart</button>
                    </div>
                    <div></div>
                    <div id="product-filters">
                        <button class="product-filter"
                            (click)="selectedExtraType=extra.type;selectedExtraTitle=extra.title"
                            *ngFor="let extra of productData.extraData">
                            <span *ngIf="extra.type=='faceInput'">Image Faces</span>
                            <span *ngIf="extra.type=='extraInfo'">Extra Info</span>
                            <span *ngIf="extra.type!='faceInput' && extra.type!='extraInfo'">{{extra.title}}</span>
                        </button>
                    </div>
                    <div *ngIf="selectedExtraType=='imgSel'">
                        <div *ngFor="let extra of productData.extraData">
                            <ion-row *ngIf="extra.title==selectedExtraTitle">
                                <ion-radio-group [name]="extra.title" [value]="extrasData['imgSel'+extra.title]" required (ionChange)="updateData($event,'imgSel'+extra.title)" id="imgSel{{extra.title}}">
                                    <ion-card class="selectionChoiceCard" *ngFor="let single of extra.values" id="selImg{{single.imageTitle}}{{extra.title}}">
                                        <img [src]="single.image"/>
                                        <ion-label class="uk-align-center uk-text-center">{{single.imageTitle}}</ion-label>
                                        <ion-label class="uk-align-center uk-text-center">&#8377;{{single.priceAddon}}</ion-label>
                                        <ion-radio [value]="single"></ion-radio>
                                    </ion-card>
                                </ion-radio-group>
                            </ion-row>
                        </div>
                    </div>
                    <div *ngIf="selectedExtraType=='textSel'">
                        <div *ngFor="let extra of productData.extraData">
                            <ion-row *ngIf="extra.title==selectedExtraTitle">
                                <ion-radio-group required [value]="extrasData['textSel'+extra.title]" (ionChange)="updateData($event,'textSel'+extra.title)" id="textSel{{extra.title}}">
                                    <ion-card class="selectionChoiceCard" *ngFor="let single of extra.values">
                                        <span class="selectionTitle">{{single.title}}</span><br>
                                        <span class="selectionPrice"> &#8377;{{single.priceAddon}}</span>
                                        <ion-radio [value]="single"></ion-radio>
                                    </ion-card>
                                </ion-radio-group>
                            </ion-row>
                        </div>
                    </div>
                    <div *ngIf="selectedExtraType=='numberSel'">
                        <div *ngFor="let extra of productData.extraData">
                            <ion-row *ngIf="extra.title==selectedExtraTitle">
                                <ion-radio-group required [value]=" ['numberSel']" (ionChange)="updateData($event,'numberSel')" id="numberSel{{extra.title}}">
                                    <ion-card class="selectionChoiceCard" *ngFor="let single of extra.values">
                                        <span class="selectionTitle">{{single.title}}</span><br>
                                        <span class="selectionPrice"> &#8377;{{single.priceAddon}}</span>
                                        <ion-radio [value]="single"></ion-radio>
                                    </ion-card>
                                </ion-radio-group>
                            </ion-row>
                        </div>
                    </div>
                    <div *ngIf="selectedExtraType=='faceInput'">
                        <div *ngFor="let extra of productData.extraData">
                            <ion-row *ngIf="extra.title==selectedExtraTitle">
                                <ion-radio-group [value]="extrasData['faceInput']" (ionChange)="updateData($event,'faceInput')" id="faceInput{{extra.title}}">
                                    <ion-card class="selectionChoiceCard" *ngFor="let single of genList(4)">
                                        <span class="selectionTitle">{{single}}</span>
                                        <ion-radio [value]="single"></ion-radio>
                                    </ion-card>
                                </ion-radio-group>
                            </ion-row>
                        </div>
                    </div>
                    <div *ngIf="selectedExtraType=='extraInfo'">
                        <div *ngFor="let extra of productData.extraData">
                            <ion-row *ngIf="extra.title==selectedExtraTitle">
                                <ion-card class="selectionChoiceCard" style="width:400px;" *ngFor="let single of extra.values">
                                    <ion-textarea placeholder="Extra Info"></ion-textarea>
                                </ion-card>
                            </ion-row>
                        </div>
                    </div>
                    <div *ngIf="selectedExtraType=='sizeSel'">
                        <div *ngFor="let extra of productData.extraData">
                            <ion-row *ngIf="extra.title==selectedExtraTitle">
                                <ion-radio-group [value]="extrasData['sizeSel']" [name]="extra.title" required (ionChange)="updateData($event,'sizeSel')" id="sizeSel{{extra.title}}">
                                    <ion-card class="selectionChoiceCard" *ngFor="let single of extra.values">
                                        <ion-label class="selectionTitle">{{single.sizeInputText}}</ion-label>
                                        <ion-radio [value]="single"></ion-radio>
                                    </ion-card>
                                </ion-radio-group>
                            </ion-row>
                        </div>
                    </div>
                </div>
            </div>
            <div id="product-description">
                <h4 id="product-description-title">Description</h4>
                <div [innerHTML]="productData.productDescription"></div>
            </div>
        </section>
        <ion-spinner *ngIf="!productData"></ion-spinner>
        <div id="container2">
            <section id="orders-container" *ngIf="recommendationProducts!=[]">
                <div>
                    <h1 class="headingproducts uk-text-center">More Products like This</h1>
                    <div class="product-row uk-text-center uk-align-center">
                        <app-product-full-card *ngFor="let product of recommendationProducts"
                            [img]="product.productImages[0].image" [productTitle]="product.productName"
                            [productDescription]="product.seoDescription" [price]="product.productPrice">
                        </app-product-full-card>
                    </div>
                </div>
            </section>
            <ion-spinner *ngIf="recommendationProducts==[]"></ion-spinner>
        </div>
    </main>
    <app-footer></app-footer>
</ion-content>